extends include/layouts/default-ux

mixin imageContent( project, image, widthClass )
  div(class=widthClass)
    if image.permission == 'private' && showPrivate === false
      .thumb-wrapper.private
        img.thumb(src='/images/projects/' + project.name + '/' + image.thumbnail)
        .message
          div.icon.fa.fa-lock
          div.text Sensitive business material
          div.actions
            a.active.btn.btn-primary.btn-xs.action(data-toggle="modal",data-target="#unlockModal") Unlock

    else
      .thumb-wrapper
        a(href='/images/projects/' + project.name + '/' + image.name)
          img.thumb(src='/images/projects/' + project.name + '/' + image.thumbnail)

mixin image( project, image )
  if ( image.width == undefined )
    +imageContent(project, image, 'col-sm-4' )
  else
    +imageContent(project, image, 'col-sm-' + image.width )
    



  

block body
  section.project-page
    .row
      .col-sm-4.col-sm-push-8.rail
        if project.thumbnail
          a(href='/images/projects/' + project.name + '/' + project.image)
            img.hero(src='/images/projects/' + project.name + '/' + project.thumbnail)
      .col-sm-8.col-sm-pull-4
        h2= project.title
        p.lead!= project.description

        if project.problem
          h3 Problem
          .problem.content!= md(project.problem)
        
        if project.results
          h3 Results
          .results.content!= md(project.results)

        if project.progress
          h3 Results
          .results.content!= md(project.progress)

        if project.tools
          h4 Tools
          ul.tools
            each tool in project.tools
              li.tool
                strong!= tool.name
                span.function!= ' (' + tool.function + ')'


    if project.images
      .between
      .row.images
        each image in project.images
          +image(project, image)

    if project.imageSets
      .between
      .row.images
        each set in project.imageSets
          .col-sm-12
            h3= set.title
            if set.lead
              p.lead!= set.lead
          each image in set.images
            +image(project, image)


  #unlockModal.modal.fade(tabindex='-1', role='dialog', aria-labelledby='unlockModalLabel', aria-hidden='true')
    .modal-dialog
        .modal-content
          .modal-header
            button.close(type='button', data-dismiss='modal')
              span(aria-hidden='true') Ã—
              span.sr-only Close
            h4#myModalLabel.modal-title Unlock Sensitive Business Material
          .modal-body
            form(role='form')
              .form-group
                label(for='unlockCode') Enter unlock code
                input(type='email', class='form-control', id='unlockCode', name='unlockCode')
              a#requestUnlockLink(href='#') Request an unlock code

          .modal-footer
            button.btn.btn-default(type='button', data-dismiss='modal') Cancel
            button.btn.btn-primary(type='button') Done
